---
title: "手軽にIoTしたいなら、XBeeがオススメです。"
description: "IoTといえば、何かしらのセンサーから収集したデータをクラウドサーバに溜め込んで、何かしらのサービスを提供することですよね。センサーデータを送受信するのに一番手..."
tags:
  - "IoT"
  - "プログラミング"
categories:
  - programming
image: /images/software-developer.jpg
date: 2016-07-21T05:38:50.000Z
author: takashi
---


<br />
IoTといえば、何かしらのセンサーから収集したデータをクラウドサーバに溜め込んで、何かしらのサービスを提供することですよね。
センサーデータを送受信するのに一番手軽なのはUART。RS232C経由のシリアルデータです。でもこれは当然有線なので、ケーブル長やレイアウトを考える必要があり、不便極まりない。
ということで、これを低消費電力性を実現しながら無線化したのが、XBeeという製品です。ざっくり言うとそんな感じ。
<h1>XBee活用事例</h1>
XBeeを活用したスマートアグリカルチャーの研究事例が、既にあったりします。検索すると他にも色々出て…こないんですよね。そんなに流行ってないのかな。結構便利なのに。
<blockquote class="twitter-tweet" data-lang="ja"><p lang="ja" dir="ltr">スマートアグリカルチャー（賢い農業）へのXBee活用事例。<a href="https://t.co/0PcQLjINVd">https://t.co/0PcQLjINVd</a></p>&mdash; takashi ando (@takashi7ando) <a href="https://twitter.com/takashi7ando/status/756121838523064321">2016年7月21日</a></blockquote>

<h1>どこで手に入る？</h1>
アンテナ形状ごとにバリエーションありますが、ZBシリーズで揃えれば通信規格は同じなので、普通に相互通信が可能です。
個人的には省スペースなPCBタイプ（基盤内部にアンテナを内蔵している）がオススメ。
<div class="kaerebalink-box"><div class="kaerebalink-image"><a href="http://c.af.moshimo.com/af/c/click?a_id=602830&amp;p_id=170&amp;pc_id=185&amp;pl_id=4062&amp;s_v=b5Rz2P0601xu&amp;url=http%3A%2F%2Fwww.amazon.co.jp%2Fexec%2Fobidos%2FASIN%2FB01CE523BC%2Fref%3Dnosim" target="_blank" rel="noopener"><img src="http://ecx.images-amazon.com/images/I/41B0YF7Tz7L._SL160_.jpg" style="border: none" /></a><img src="http://i.af.moshimo.com/af/i/impression?a_id=602830&amp;p_id=170&amp;pc_id=185&amp;pl_id=4062" width="1" height="1" style="border:none"></div><div class="kaerebalink-info"><div class="kaerebalink-name"><a href="http://c.af.moshimo.com/af/c/click?a_id=602830&amp;p_id=170&amp;pc_id=185&amp;pl_id=4062&amp;s_v=b5Rz2P0601xu&amp;url=http%3A%2F%2Fwww.amazon.co.jp%2Fexec%2Fobidos%2FASIN%2FB01CE523BC%2Fref%3Dnosim" target="_blank" rel="noopener">XBee ZB（S2C） / PCBアンテナ型</a><img src="http://i.af.moshimo.com/af/i/impression?a_id=602830&amp;p_id=170&amp;pc_id=185&amp;pl_id=4062" width="1" height="1" style="border:none"><div class="kaerebalink-powered-date">posted with <a href="http://kaereba.com" rel="nofollow noopener" target="_blank">カエレバ</a></div></div><div class="kaerebalink-detail"> スイッチサイエンス     </div><div class="kaerebalink-link1"><div class="shoplinkamazon"><a href="http://c.af.moshimo.com/af/c/click?a_id=602830&amp;p_id=170&amp;pc_id=185&amp;pl_id=4062&amp;s_v=b5Rz2P0601xu&amp;url=http%3A%2F%2Fwww.amazon.co.jp%2Fgp%2Fsearch%3Fkeywords%3DXBee%2520ZB%2581iS2C%2581j%2520%252F%2520PCB%2583A%2583%2593%2583e%2583i%258C%255E%26__mk_ja_JP%3D%2583J%2583%255E%2583J%2583i" target="_blank" rel="noopener">Amazonで購入</a><img src="http://i.af.moshimo.com/af/i/impression?a_id=602830&amp;p_id=170&amp;pc_id=185&amp;pl_id=4062" width="1" height="1" style="border:none"></div><div class="shoplinkrakuten"><a href="http://c.af.moshimo.com/af/c/click?a_id=602830&amp;p_id=54&amp;pc_id=54&amp;pl_id=616&amp;s_v=b5Rz2P0601xu&amp;url=http%3A%2F%2Fsearch.rakuten.co.jp%2Fsearch%2Fmall%2FXBee%2520ZB%25EF%25BC%2588S2C%25EF%25BC%2589%2520%252F%2520PCB%25E3%2582%25A2%25E3%2583%25B3%25E3%2583%2586%25E3%2583%258A%25E5%259E%258B%2F-%2Ff.1-p.1-s.1-sf.0-st.A-v.2%3Fx%3D0" target="_blank" rel="noopener">楽天市場で購入</a><img src="http://i.af.moshimo.com/af/i/impression?a_id=602830&amp;p_id=54&amp;pc_id=54&amp;pl_id=616" width="1" height="1" style="border:none"></div></div></div><div class="booklink-footer" style="clear: left"></div></div>
<div class="kaerebalink-box"><div class="kaerebalink-image"><a href="http://c.af.moshimo.com/af/c/click?a_id=602830&amp;p_id=170&amp;pc_id=185&amp;pl_id=4062&amp;s_v=b5Rz2P0601xu&amp;url=http%3A%2F%2Fwww.amazon.co.jp%2Fexec%2Fobidos%2FASIN%2FB01CE4D0U6%2Fref%3Dnosim" target="_blank" rel="noopener"><img src="http://ecx.images-amazon.com/images/I/41kz3MEcYUL._SL160_.jpg" style="border: none" /></a><img src="http://i.af.moshimo.com/af/i/impression?a_id=602830&amp;p_id=170&amp;pc_id=185&amp;pl_id=4062" width="1" height="1" style="border:none"></div><div class="kaerebalink-info"><div class="kaerebalink-name"><a href="http://c.af.moshimo.com/af/c/click?a_id=602830&amp;p_id=170&amp;pc_id=185&amp;pl_id=4062&amp;s_v=b5Rz2P0601xu&amp;url=http%3A%2F%2Fwww.amazon.co.jp%2Fexec%2Fobidos%2FASIN%2FB01CE4D0U6%2Fref%3Dnosim" target="_blank" rel="noopener">XBee ZB（S2C） / ワイヤアンテナ型</a><img src="http://i.af.moshimo.com/af/i/impression?a_id=602830&amp;p_id=170&amp;pc_id=185&amp;pl_id=4062" width="1" height="1" style="border:none"><div class="kaerebalink-powered-date">posted with <a href="http://kaereba.com" rel="nofollow noopener" target="_blank">カエレバ</a></div></div><div class="kaerebalink-detail"> スイッチサイエンス     </div><div class="kaerebalink-link1"><div class="shoplinkamazon"><a href="http://c.af.moshimo.com/af/c/click?a_id=602830&amp;p_id=170&amp;pc_id=185&amp;pl_id=4062&amp;s_v=b5Rz2P0601xu&amp;url=http%3A%2F%2Fwww.amazon.co.jp%2Fgp%2Fsearch%3Fkeywords%3DXBee%2520ZB%2581iS2C%2581j%2520%252F%2520%2583%258F%2583C%2583%2584%2583A%2583%2593%2583e%2583i%258C%255E%26__mk_ja_JP%3D%2583J%2583%255E%2583J%2583i" target="_blank" rel="noopener">Amazonで購入</a><img src="http://i.af.moshimo.com/af/i/impression?a_id=602830&amp;p_id=170&amp;pc_id=185&amp;pl_id=4062" width="1" height="1" style="border:none"></div><div class="shoplinkrakuten"><a href="http://c.af.moshimo.com/af/c/click?a_id=602830&amp;p_id=54&amp;pc_id=54&amp;pl_id=616&amp;s_v=b5Rz2P0601xu&amp;url=http%3A%2F%2Fsearch.rakuten.co.jp%2Fsearch%2Fmall%2FXBee%2520ZB%25EF%25BC%2588S2C%25EF%25BC%2589%2520%252F%2520%25E3%2583%25AF%25E3%2582%25A4%25E3%2583%25A4%25E3%2582%25A2%25E3%2583%25B3%25E3%2583%2586%25E3%2583%258A%25E5%259E%258B%2F-%2Ff.1-p.1-s.1-sf.0-st.A-v.2%3Fx%3D0" target="_blank" rel="noopener">楽天市場で購入</a><img src="http://i.af.moshimo.com/af/i/impression?a_id=602830&amp;p_id=54&amp;pc_id=54&amp;pl_id=616" width="1" height="1" style="border:none"></div></div></div><div class="booklink-footer" style="clear: left"></div></div>
<h1>どうやって使う？</h1>
このXBee、今となっては超有名なArduinoとは違って、自分で書いたコードをコンパイルすることはできません（できる製品もあるっぽいんですが）。
出来合いのファームウェアを選んで書くだけというシンプル仕様。
ファームを書くまではシンプルなんですが、狙った通りに動かすための<strong>設定</strong>はかなりしんどいです。
それらを一括してやるための専用公式アプリが公開されています。もちろん無料。
<blockquote class="twitter-tweet" data-lang="ja"><p lang="en" dir="ltr">XCTU - Next Gen Configuration Platform for XBee/RF Solutions - Digi International <a href="https://t.co/6Udsld4uLq">https://t.co/6Udsld4uLq</a></p>&mdash; takashi ando (@takashi7ando) <a href="https://twitter.com/takashi7ando/status/756129849186525185">2016年7月21日</a></blockquote>

このXBee設定方法や理屈の詳細は、オライリーらしからぬ明るい表紙の下記の本を熟読するのがオススメです。センサー類をXBeeに接続して無線で監視するような本格的なシステム構築方法を詳しく解説しています。
<div class="booklink-box"><div class="booklink-image"><a href="http://c.af.moshimo.com/af/c/click?a_id=602830&amp;p_id=170&amp;pc_id=185&amp;pl_id=4062&amp;s_v=b5Rz2P0601xu&amp;url=http%3A%2F%2Fwww.amazon.co.jp%2Fexec%2Fobidos%2FASIN%2F4873115302%2Fref%3Dnosim" target="_blank" rel="noopener"><img src="http://ecx.images-amazon.com/images/I/51gJRt1G6JL._SL160_.jpg" style="border: none" /></a><img src="http://i.af.moshimo.com/af/i/impression?a_id=602830&amp;p_id=170&amp;pc_id=185&amp;pl_id=4062" width="1" height="1" style="border:none"></div><div class="booklink-info"><div class="booklink-name"><a href="http://c.af.moshimo.com/af/c/click?a_id=602830&amp;p_id=170&amp;pc_id=185&amp;pl_id=4062&amp;s_v=b5Rz2P0601xu&amp;url=http%3A%2F%2Fwww.amazon.co.jp%2Fexec%2Fobidos%2FASIN%2F4873115302%2Fref%3Dnosim" target="_blank" rel="noopener">XBeeで作るワイヤレスセンサーネットワーク (Make: PROJECTS)</a><img src="http://i.af.moshimo.com/af/i/impression?a_id=602830&amp;p_id=170&amp;pc_id=185&amp;pl_id=4062" width="1" height="1" style="border:none"><div class="booklink-powered-date">posted with <a href="http://yomereba.com" rel="nofollow noopener" target="_blank">ヨメレバ</a></div></div><div class="booklink-detail">Robert Faludi オライリージャパン 2011-12-09    </div><div class="booklink-link2"><div class="shoplinkamazon"><a href="http://c.af.moshimo.com/af/c/click?a_id=602830&amp;p_id=170&amp;pc_id=185&amp;pl_id=4062&amp;s_v=b5Rz2P0601xu&amp;url=http%3A%2F%2Fwww.amazon.co.jp%2Fexec%2Fobidos%2FASIN%2F4873115302%2Fref%3Dnosim" target="_blank" rel="noopener">Amazon</a><img src="http://i.af.moshimo.com/af/i/impression?a_id=602830&amp;p_id=170&amp;pc_id=185&amp;pl_id=4062" width="1" height="1" style="border:none"></div><div class="shoplinkkindle"><a href="http://c.af.moshimo.com/af/c/click?a_id=602830&amp;p_id=170&amp;pc_id=185&amp;pl_id=4062&amp;s_v=b5Rz2P0601xu&amp;url=http%3A%2F%2Fwww.amazon.co.jp%2Fgp%2Fsearch%3Fkeywords%3DXBee%2582%25C5%258D%25EC%2582%25E9%2583%258F%2583C%2583%2584%2583%258C%2583X%2583Z%2583%2593%2583T%2581%255B%2583l%2583b%2583g%2583%258F%2581%255B%2583N%2520%2528Make%253A%2520PROJECTS%2529%26__mk_ja_JP%3D%2583J%2583%255E%2583J%2583i%26url%3Dnode%253D2275256051" target="_blank" rel="noopener">Kindle</a><img src="http://i.af.moshimo.com/af/i/impression?a_id=602830&amp;p_id=170&amp;pc_id=185&amp;pl_id=4062" width="1" height="1" style="border:none"></div><div class="shoplinkrakuten"><a href="http://c.af.moshimo.com/af/c/click?a_id=602830&amp;p_id=56&amp;pc_id=56&amp;pl_id=637&amp;s_v=b5Rz2P0601xu&amp;url=http%3A%2F%2Fbooks.rakuten.co.jp%2Frb%2F11474007%2F" target="_blank" rel="noopener">楽天ブックス</a><img src="http://i.af.moshimo.com/af/i/impression?a_id=602830&amp;p_id=56&amp;pc_id=56&amp;pl_id=637" width="1" height="1" style="border:none"></div><div class="shoplinkrakukobo"><a href="http://c.af.moshimo.com/af/c/click?a_id=602830&amp;p_id=56&amp;pc_id=56&amp;pl_id=637&amp;s_v=b5Rz2P0601xu&amp;url=" target="_blank" rel="noopener">楽天kobo</a><img src="http://i.af.moshimo.com/af/i/impression?a_id=602830&amp;p_id=56&amp;pc_id=56&amp;pl_id=637" width="1" height="1" style="border:none"></div>                                  </div></div><div class="booklink-footer"></div></div>
<h1>使い方概略</h1>
詳しくは本読めと丸投げするのもなんなので、簡単に概略説明します。
XBeeはCoordinator、Router、EndDeviceの３つのうち、どれか一つの動作モードを選択します。どれか一つのファームウェアしか書くことができない、ということですね。
選ぶのは、先ほど触れた専用アプリの下記画面。Routerとかの文字が見れますね。
<img src="https://qiita-image-store.s3.amazonaws.com/0/27086/1ab68ab6-822f-91db-d9cf-513a1f5dbe8e.png" alt="スクリーンショット 2014-09-16 11.29.12.png" />
XBeeを使って構築する無線ネットワーク内に、Coordinatorが必ず一つ必要で、他のRouterやEndDeviceの中心的存在となります。
で、まあ、選択したタイプやネットワークに応じて以下のような画面でポチポチ設定していくわけなんですが…。
<img src="https://qiita-image-store.s3.amazonaws.com/0/27086/b4ab21f8-ae96-1081-ae7e-b0e30f9a8629.png" alt="スクリーンショット 2015-07-22 1.33.26.png" />
これを事細かに説明するのは正直しんどいので、先ほど紹介した「XBeeで作るワイヤレスセンサーネットワーク」を買って読んでみてください。Kindle版もありますよ。
<h1>まとめ</h1>
温度や湿度を計測するセンサーはSPIやI2Cで通信するタイプが多いので、XBee単体だとちょっと辛いです。やっぱりArduinoくらいは必要か…。
<strong>各種センサー -&gt; Arduino -&gt; XBee -&gt; XBee -&gt; RaspberryPi/普通のPC -&gt; クラウドサーバ</strong>
といった感じですかね。
土の湿り気を測るSoil Sensorなんかはアナログ形式が多く、微弱な電圧計測可能なADC端子さえあればいいので、XBee単体でもいけそうです。
次回はもう少し掘り下げてみたいと思います。